
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="IBM Cloud Hyper Protect Services Level 3 for Sales and Technical Sales">
      
      
        <meta name="author" content="Christopher Bienko (cdbienko@us.ibm.com)">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.1">
    
    
      
        <title>Creation of a Contract for PayNow Application via Terraform - IBM Cloud Hyper Protect Services Level 3 for Sales and Technical Sales</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#creation-of-a-contract-for-paynow-application-via-terraform" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="IBM Cloud Hyper Protect Services Level 3 for Sales and Technical Sales" class="md-header__button md-logo" aria-label="IBM Cloud Hyper Protect Services Level 3 for Sales and Technical Sales" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IBM Cloud Hyper Protect Services Level 3 for Sales and Technical Sales
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Creation of a Contract for PayNow Application via Terraform
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="IBM Cloud Hyper Protect Services Level 3 for Sales and Technical Sales" class="md-nav__button md-logo" aria-label="IBM Cloud Hyper Protect Services Level 3 for Sales and Technical Sales" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    IBM Cloud Hyper Protect Services Level 3 for Sales and Technical Sales
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../evaluation/" class="md-nav__link">
        Evaluation
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Module 1 - IBM Cloud Hyper Protect Crypto Services (HPCS)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Module 1 - IBM Cloud Hyper Protect Crypto Services (HPCS)" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Module 1 - IBM Cloud Hyper Protect Crypto Services (HPCS)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../HPCS/01-Introduction-to-HPCS-and-UKO/" class="md-nav__link">
        Introduction to HPCS and UKO
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../HPCS/02-Provision-and-access/" class="md-nav__link">
        Provision and access an IBM Technology Zone environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../HPCS/03-Create-a-key/" class="md-nav__link">
        Generating a unique key with the AWS Keystore
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../HPCS/04-Digitally-shred/" class="md-nav__link">
        Digitally shred AWS S3 objects
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../HPCS/05-Clean-up/" class="md-nav__link">
        Clean up and conclusion
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Module 2 - IBM Cloud Hyper Protect Virtual Servers (HPVS)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Module 2 - IBM Cloud Hyper Protect Virtual Servers (HPVS)" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Module 2 - IBM Cloud Hyper Protect Virtual Servers (HPVS)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01-Introduction-to-HPVS/" class="md-nav__link">
        Introduction to HPVS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../02-Prerequites-and-Preparation/" class="md-nav__link">
        Prerequisites and Preparation
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Creation of a Contract for PayNow Application via Terraform
      </a>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../04-Configure-HPVS/" class="md-nav__link">
        Configuration of a Hyper Protect Virtual Servers for VPC Instance on IBM Cloud
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="creation-of-a-contract-for-paynow-application-via-terraform">Creation of a Contract for PayNow Application via Terraform</h1>
<hr />
<p>In this module, you will use these tools and technologies to generate a <code>Contract</code> for creation of an HPVS instance with the IBM Hyper Protect Container Runtime (HPCR) image.</p>
<hr />
<ol>
<li>Install the <strong>OpenSSL binary</strong> on your local machine. More information about the OpenSSL Project can be found within their online documentation: <a href="https://www.openssl.org" target="_blank">https://www.openssl.org</a></li>
</ol>
<p>To install OpenSSL, either read the instructions detailed here (<a href="https://www.openssl.org/source/gitrepo.html" target="_blank">https://www.openssl.org/source/gitrepo.html</a>) or execute the following commands one at a time in your command line interface:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>git clone git://git.openssl.org/openssl.git
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nb">cd</span> openssl
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>git config core.autocrlf <span class="nb">false</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>git config core.eol lf
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>git checkout .
</code></pre></div></p>
<hr />
<ol start="2">
<li>Install the <strong>Terraform CLI</strong> on your local machine. Detailed instructions and video instructions for doing so are provided online: <a href="https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli" target="_blank">https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli</a></li>
</ol>
<p>You may either follow the detailed instructions (above) or execute the condensed instructions line-by-line (below):</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>brew tap hashicorp/tap
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>brew install hashicorp/tap/terraform
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>brew update
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>brew upgrade hashicorp/tap/terraform
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>terraform -version
</code></pre></div></p>
<hr />
<ol start="3">
<li>Now you are ready to create the <code>Contract</code>. Use <strong>Git</strong> to clone the following repository to your local machine (<em>note: this is a different repository to the one you cloned previously</em>):</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>gh repo clone ibm-hyper-protect/linuxone-vsi-automation-samples
</code></pre></div>
<p>Alternatively, you can <strong>Download ZIP</strong> the file manually from the <a href="https://github.com/ibm-hyper-protect/linuxone-vsi-automation-samples" target="_blank">GitHub repository</a> using your web browser.</p>
<hr />
<ol start="4">
<li>Navigate to the following directory:</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nb">cd</span> linuxone-vsi-automation-samples/terraform-hpvs/create-contract-dynamic-registry/
</code></pre></div>
<hr />
<ol start="5">
<li>Edit the <code>docker-compose.yml</code> file in the <code>/compose</code> folder. You need to specify <strong>YOUR</strong> container image digest (<strong>Step 12</strong> of the previous module) and set the exposed ports to the following. Delete any other lines that were included in the original YAML file by default.</li>
</ol>
<p>Replicate the following example of a completed <code>docker-compose.yml</code> file. On <strong>Line 4</strong> for the argument <code>image:</code>, replace the <em>last</em> <code>&lt;sha256&gt;</code> characters with your container image digest:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span>
<span class="normal"><a href="#__codelineno-12-3">3</a></span>
<span class="normal"><a href="#__codelineno-12-4">4</a></span>
<span class="normal"><a href="#__codelineno-12-5">5</a></span>
<span class="normal"><a href="#__codelineno-12-6">6</a></span>
<span class="normal"><a href="#__codelineno-12-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="w"></span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="nt">services</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">  </span><span class="nt">paynow</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${REGISTRY}/hpvs-sample/paynow-website@sha256:&lt;sha256&gt;</span><span class="w"></span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8080:8080&quot;</span><span class="w"></span>
<a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8443:8443&quot;</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>Be careful to match the indentation and whitespacing exactly as given below, as YAML files use indentation to parse instructions. When satisfied, save the changes and exit the file.</p>
<hr />
<ol start="6">
<li>Return to the <code>linuxone-vsi-automation-samples/terraform-hpvs/create-contract-dynamic-registry/</code> directory from Step 4.</li>
</ol>
<p>Locate the <code>my-settings.auto.tfvars-template</code> file within this directory.</p>
<p><strong>Duplicate</strong> this file and then <strong>rename</strong> it to <code>my-settings.auto.tfvars</code> instead.</p>
<p>Edit the <code>my-settings.auto.tfvars</code> file and replicate (using <strong>YOUR</strong> IBM Cloud account details) the following example as closely as possible:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span>
<span class="normal"><a href="#__codelineno-13-3">3</a></span>
<span class="normal"><a href="#__codelineno-13-4">4</a></span>
<span class="normal"><a href="#__codelineno-13-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a>registry=&quot;&lt;your container registry&gt;&quot;
<a id="__codelineno-13-2" name="__codelineno-13-2"></a>pull_username=&quot;iamapikey&quot;
<a id="__codelineno-13-3" name="__codelineno-13-3"></a>pull_password=&quot;&lt;your API key&gt;&quot;
<a id="__codelineno-13-4" name="__codelineno-13-4"></a>logdna_ingestion_key=&quot;&lt;your ingestion key&gt;&quot;
<a id="__codelineno-13-5" name="__codelineno-13-5"></a>logdna_ingestion_hostname=&quot;&lt;your ingestion host&gt;&quot;
</code></pre></div></td></tr></table></div>
<p>Adjust the following values:</p>
<ul>
<li>
<p><em>Line 1</em>: Replace <code>&lt;your container registry&gt;</code> with the first component of the container registry digest you recorded in Step 13 of the Prerequisites module. Likely this is a value such as <code>us.icr.io</code> Preserve the double-quotation marks.</p>
</li>
<li>
<p><em>Line 3</em>: Replace <code>&lt;your API key&gt;</code> with the contents of the <code>key.pub</code> SSH key that you created and stored locally in Step 8 of the Prerequisites module. Preserve the double-quotation marks.</p>
</li>
<li>
<p><em>Line 4</em>: Replace <code>&lt;your ingestion key&gt;</code> with the <strong>Ingestion Key</strong> recorded in Step 2 of the Prerequisites module. This is likely a value similar to <code>a17b8b912bcddda9d84d544d82a74c50</code>. Preserve the double-quotation marks.</p>
</li>
<li>
<p><em>Line 5</em>: Replace <code>&lt;your ingestion host&gt;</code> with the <strong>Ingestion Host</strong> recorded in Step 2 of the Prerequisites module. This is likely a value similar to <code>syslog-a.us-south.logging.cloud.ibm.com</code>. Preserve the double-quotation marks.</p>
</li>
</ul>
<p>When satisfied, save the changes and exit the file.</p>
<hr />
<ol start="7">
<li>To initialize Terraform, execute the following command:</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>terraform init
</code></pre></div>
<hr />
<ol start="8">
<li>Generate the Terraform <code>Contract</code> using the following command:</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>terraform apply
</code></pre></div>
<p>You will be prompted mid-way through the process whether you want Terraform to perform the actions prescribed, to which you should respond with <code>yes</code> and hit the <code>Return</code> key.</p>
<p><img alt="" loading="lazy" src="../_attachments/module2_figure22.png" width="400" /></p>
<p>Once completed, you should see the following screen:</p>
<p><img alt="" loading="lazy" src="../_attachments/module2_figure23.png" width="400" /></p>
<hr />
<ol start="9">
<li>Display the <code>Contract</code> that is created with the Terraform script by running the following:</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>cat build/contract.yml
</code></pre></div>
<p><strong>RECORD</strong> the entirety of the contract to a notepad. You will need to reference this information in the following module.</p>
<hr />
<h1 id="_1"></h1>
<h1 id="next-steps">Next Steps</h1>
<p>In the following section, you will configure and deploy a Hyper Protect Virtual Servers for VPC instance on IBM Cloud using the freshly generated <code>Contract</code>.</p>
<!-- 






















1. On your local machine, in a directory of your choosing, execute the following command to clone an IBM Hyper Protect git repository:

<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>git clone https://github.com/ibm-hyper-protect/linuxone-vsi-automation-samples.git
</code></pre></div>

---

2. Navigate to the newly created (cloned) repository:

<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>cd linuxone-vsi-automation-samples/terraform-hpvs/create-contract
</code></pre></div>

---

3. Navigate deeper into the "compose" subdirectory and edit the contents of the `docker-compose.yml` YAML file. It is recommended that you use the `VI` editor, but you can use whichever editor you prefer.

<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>cd compose
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>vi docker-compose.yml
</code></pre></div>

---

4. Copy and replace the contents of the `docker-compose.yml` file with the lines of code below. Be careful to match the indentation and whitespacing exactly as given below, as YAML files use indentation to parse instructions. When satisfied, save the changes and exit the file.

<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>version: &quot;3&quot;
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>services:
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>  paynow:
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>    image: ghcr.io/ibm-hyper-protect/paynow-website@sha256:85765a17f14914f4d3223d75a84a3680de8e1b6a48d56f3363d68b02c93246f4
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>    ports:
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>      - &quot;8080:8080&quot;
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>      - &quot;8443:8443&quot;
</code></pre></div>

---

5. IBM Cloud resources ("the provider" in Terraform) need to be configured with the proper credentials before they can be used in conjunction with Terraform. Additional information can be found online: <a href="https://registry.terraform.io/providers/IBM-Cloud/ibm/latest/docs#authentication" target="_blank">https://registry.terraform.io/providers/IBM-Cloud/ibm/latest/docs#authentication</a> -->




              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../02-Prerequites-and-Preparation/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Prerequisites and Preparation" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Prerequisites and Preparation
            </div>
          </div>
        </a>
      
      
        
        <a href="../04-Configure-HPVS/" class="md-footer__link md-footer__link--next" aria-label="Next: Configuration of a Hyper Protect Virtual Servers for VPC Instance on IBM Cloud" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Configuration of a Hyper Protect Virtual Servers for VPC Instance on IBM Cloud
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 IBM
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
    
  </body>
</html>