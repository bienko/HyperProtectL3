
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Hyper Protect Services Platform Level 3 for Sales and Technical Sales">
      
      
        <meta name="author" content="Christopher Bienko (cdbienko@us.ibm.com)">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.1">
    
    
      
        <title>Provision and access the environment - Hyper Protect Services Platform Level 3 for Sales and Technical Sales</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Hyper Protect Services Platform Level 3 for Sales and Technical Sales" class="md-header__button md-logo" aria-label="Hyper Protect Services Platform Level 3 for Sales and Technical Sales" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Hyper Protect Services Platform Level 3 for Sales and Technical Sales
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Provision and access the environment
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Hyper Protect Services Platform Level 3 for Sales and Technical Sales" class="md-nav__button md-logo" aria-label="Hyper Protect Services Platform Level 3 for Sales and Technical Sales" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Hyper Protect Services Platform Level 3 for Sales and Technical Sales
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Provision and access the environment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Provision and access the environment" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Provision and access the environment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Provision and access the environment
      </a>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Create a key with AWS Keystore
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Create a key with AWS Keystore" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Create a key with AWS Keystore
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part 2/01 Deploy a VM.md" class="md-nav__link">
        Deploy a Virtual Machine
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Digitally shred AWS S3 bucket objects
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Digitally shred AWS S3 bucket objects" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Digitally shred AWS S3 bucket objects
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part 3/01 Laying the Groundwork.md" class="md-nav__link">
        Laying the Groundwork
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Cleaning up and conclusion
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Cleaning up and conclusion" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Cleaning up and conclusion
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part 4/01 Business Partner Accreditation.md" class="md-nav__link">
        Business Partner Accreditation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="_1"></h1>
<h1 id="reserving-an-environment">Reserving an environment</h1>
<div class="admonition tip">
<p class="admonition-title">IBM TECHNOLOGY ZONE</p>
<p>You will require access to the <strong>IBM Technology Zone (ITZ)</strong> in order to reserve your environment and complete the hands-on training. If you do not yet have access or an account with the ITZ, you may register for one by visiting the following page: <a href="https://techzone.ibm.com" target="_blank">https://techzone.ibm.com</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">VI CHEAT SHEET</p>
<p>Throughout this lab, you will make extensive use of the VI text editor. If you're not familiar with this editor, you can quickly get up to speed using the following cheat sheet: <a href="https://www.cse.scu.edu/~yfang/coen11/vi-CheatSheet.pdf" target="_blank">https://www.cse.scu.edu/~yfang/coen11/vi-CheatSheet.pdf</a> for reference.</p>
</div>
<p>The hands-on environment can be provisioned free-of-charge using the reservation portal: <a href="https://techzone.ibm.com/collection/deploying-red-hat-ansible-on-ibm-power-with-aix/environments" target="_blank">https://techzone.ibm.com/collection/deploying-red-hat-ansible-on-ibm-power-with-aix/environments</a></p>
<p>Reservations take approximately <strong>15-20 minutes</strong> to provision and deploy.</p>
<p><img alt="" src="_attachments/part1_figure1a.png" /></p>
<div class="admonition warning">
<p class="admonition-title">MULTIPLE ENVIRONMENT TEMPLATES</p>
<p>IBM Technology Zone may display multiple configurations to choose from. Select the template that matches the screenshot above and continue with the reservation steps as documented.</p>
</div>
<p>You may select the option to <em>Reserve now</em> (recommended) or <em>Schedule for later</em>.</p>
<p><img alt="" src="_attachments/part1_figure1b.png" /></p>
<p>In order to complete your ITZ reservation of the PowerVC infrastructure, you must supply the following information:</p>
<ul>
<li>
<p><strong>Name</strong>: Give your reservation a unique name.</p>
</li>
<li>
<p><strong>Purpose</strong>: Set to <em>Practice / Self-Education</em> and affirm that the environment will not be used with customer data.</p>
</li>
<li>
<p><strong>Purpose Description</strong>: Provide a brief summary of how the environment will be used.</p>
</li>
<li>
<p><strong>Preferred Geography</strong>: <em>USA</em></p>
</li>
<li>
<p><strong>Start Date &amp; Time</strong>: Select the time and date for when you plan to begin work on the hands-on material.</p>
</li>
<li>
<p><strong>End Date &amp; Time</strong>: Select a time and date for when the reservation will expire.</p>
</li>
</ul>
<p><img alt="" src="_attachments/part1_figure1c.png" /></p>
<p>When satisfied, click the <strong>Check Availability</strong> button at the bottom of the page to verify that resources are available for your requested time slot. If the check passes, you can finalize your reservation request by clicking <strong>Submit</strong>.</p>
<h1 id="_2"></h1>
<h1 id="accessing-your-itz-reservation">Accessing your ITZ reservation</h1>
<p>As a reminder, reservations take approximately <strong>15-20 minutes</strong> to complete from the time that you click submit. If you navigate to the <strong>My Reservations</strong> tab of the ITZ ( <a href="https://techzone.ibm.com/my/reservations" target="_blank">https://techzone.ibm.com/my/reservations</a> ), you can monitor the progress of your reservation.</p>
<div class="admonition note">
<p class="admonition-title">WAIT UNTIL READY</p>
<p>Wait for the Tech Zone reservation to be marked as "<em>Ready</em>" before attempting to start the lab — accessing it too soon will lead to issues (or an outright failure) when connecting to the PowerVC instance.</p>
</div>
<p>You will also receive an email to your inbox once the environment has successfully deployed, as shown here.</p>
<p><img alt="" src="_attachments/part1_v2_figure1.png" /></p>
<p>The <strong>"Your environment is ready"</strong> email contains links back to the <a href="https://techzone.ibm.com/my/reservations" target="_blank">My Reservations</a> tab, which now is populated with all of the details needed to access your PowerVC environment — hostnames, addresses, login information, and so on. Navigate to the page, which should look similar to the following screenshot. Note that <em>your</em> environment's details will differ.</p>
<p><img alt="" src="_attachments/part1_v2_figure2.png" /></p>
<p>There are several critical pieces of information that you should <strong>record</strong> at this time, as they will be referenced again repeatedly in the steps to come. Save these values (unique to your environment) to a notepad:</p>
<ul>
<li>
<p><strong>User Account</strong>: This will be <code>cecuser</code> for all environments.</p>
</li>
<li>
<p><strong>User Password</strong>: Unique to your environment. Use the clipboard icon to copy.</p>
</li>
<li>
<p><strong>VM 1 IP Address</strong></p>
</li>
<li>
<p><strong>VM 2 IP Address</strong></p>
</li>
<li>
<p><strong>VM 3 IP Address</strong></p>
</li>
</ul>
<p>The three virtual machines (VMs) will correspond to the Ansible AIX host and server nodes once Ansible has been installed and deployed across the cluster.</p>
<h1 id="_3"></h1>
<h1 id="connecting-to-the-environment-over-ssh">Connecting to the environment over SSH</h1>
<div class="admonition warning">
<p class="admonition-title">VPN ACCESS</p>
<p>IBM employees and business partners will need to be connected to the IBM intranet via VPN in order to remotely SSH into the PowerVC cluster. If you are not connected via VPN, the connection attempt will time out.</p>
</div>
<div class="admonition note">
<p class="admonition-title">SSH and PuTTY - WINDOWS USERS</p>
<p>For detailed instructions on how to connect with PuTTY on Windows, <a href="https://ibm.box.com/s/d71tn63hutdxrjwh21qdzralrsxlcspe" target="_blank">reference the linked material.</a></p>
</div>
<p>You now have all the necessary information to remotely connect over SSH to the PowerVC cluster. To connect via SSH, it is recommended that you use Terminal (MacOS) or <a href="https://www.putty.org" target="_blank">PuTTY</a> (Windows).</p>
<p>Connect via SSH using the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>ssh UserAccount@VM_1_IPAddress
</code></pre></div>
<p>Replace the <em>UserAccount</em> with the User Account (<code>cecuser</code>) recorded earlier. Similarly, replace the <em>VM_1_IPAddress</em> field with the IP address of VM 1 recorded earlier — <strong>use the value unique to your ITZ reservation</strong>.</p>
<p>Press return and wait until you are prompted to provide a <em>password</em>: supply the <em>User Password</em> value recorded earlier. Hit <em>Return</em> and wait for the connection to complete. If successful, your console will now be connected directly to the PowerVC cluster.</p>
<p><img alt="" src="_attachments/part1_v2_figure3.png" /></p>
<h1 id="_4"></h1>
<h1 id="installing-ansible-on-powervc">Installing Ansible on PowerVC</h1>
<p>The next order of business is deploying Ansible to the three nodes of the ITZ-provisioned PowerVC cluster. Before we can do this, we need to make some preparations to the environment.</p>
<p>First, update the Dandified Yum (<code>DNF</code>) installer — which is now the officially supported software package manager for IBM Technology Zone, replacing <code>yum</code> and other alternatives.</p>
<p>The following will update DNF to the latest version:
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>sudo dnf update
</code></pre></div>
Indicate <code>y</code> when prompted to continue updating the 73 packages.</p>
<p>You will also need to install <strong>Git</strong> in anticipation of some later modules in this course. Do so by executing the following command:
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>sudo dnf install git
</code></pre></div></p>
<p>Indicate <code>y</code> when prompted to continue installing the 7 packages.</p>
<p>Next, use <strong>DNF to install Ansible</strong>. One of the remarkable features of Ansible’s automation is how elegant and simple it makes even complex tasks like installing software across a cluster. Do so by executing the following:
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>sudo dnf install ansible
</code></pre></div>
It's as simple as executing the following command and pressing <code>y</code> when prompted. Easy!</p>
<p><img alt="" src="_attachments/part1_v2_figure5.png" /></p>
<p>Verify the integrity of your Ansible installation:
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>ansible --version
</code></pre></div></p>
<p><img alt="" src="_attachments/part1_v2_figure6.png" /></p>
<p>Next, we need to edit the <code>/OPT/FREEWARE/ETC/ANSIBLE/ANSIBLE.CFG</code> file in order to disable <code>host_key_checking</code> and to use Python as the default interpreter. Disabling <code>host_key_checking</code> will save you having to re-enter your password throughout the lab.</p>
<p>Open the config file with the following:
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>sudo vi /opt/freeware/etc/ansible/ansible.cfg
</code></pre></div></p>
<p>Add the following two lines after the <code>[Defaults]</code> header:
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>host_key_checking = False
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>interpreter_python = /usr/bin/python
</code></pre></div>
Your configuration file should closely resemble the one in the following screenshot.</p>
<p><img alt="" src="_attachments/part1_v2_figure7.png" /></p>
<p>When satisfied, save and exit (<code>:x</code>) the configuration file.</p>
<p>Create a new <code>/ANSIBLE-SCRIPTS</code> directory:
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>sudo mkdir $HOME/ansible-scripts
</code></pre></div></p>
<p>In the Ansible <code>HOSTS</code> file, we will next need to supply the three IP addresses for the PowerVC cluster that were recorded earlier. One PowerVC virtual machine (<code>VM 1</code>) will serve as the <code>aixserver</code> and the two other virtual machines (<code>VM 2</code> and <code>VM 3</code>) will act as the <code>aixclients</code>.</p>
<div class="admonition note">
<p class="admonition-title">ANSIBLE CONTROLLER NODE</p>
<p>PowerVC Virtual Machine (VM) 1 in this environment has been designated in this step as the <code>aixserver</code> within the Ansible <code>HOSTS</code> file. This VM will also be referred to in subsequent sections as the <strong>Ansible Controller Node</strong>, as it serves the same purpose (as a server, controller, master, and so on) for Ansible automation as well.</p>
</div>
<p>You need to put the IP address of each of your servers in this <code>HOSTS</code> file. Ansible supports hostname too, but this will not work here due to lack of a DNS-updated date on our test AIX servers.</p>
<p>Execute the following statement to enter the <strong>vi</strong> editor:
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>sudo vi /opt/freeware/etc/ansible/hosts
</code></pre></div></p>
<p>At the top of the file, add the following to the <strong>top</strong> of the <code>HOSTS</code> configuration file.<strong> Modify the IP values to match the the VM addresses recorded earlier. </strong>Remember** — the <code>aixserver</code> corresponds to VM1 and <code>aixclients</code> corresponds to VM2 and VM2.
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>[aixservers]
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>129.40.yy.xxx
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>[aixclients]
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>129.40.yy.xxx
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>129.40.yy.xxx
</code></pre></div></p>
<p>Your <code>HOSTS</code> file should closely resemble the following — using the IP addresses unique to <em>your</em> PowerVC cluster.</p>
<p><img alt="" src="_attachments/part1_v2_figure8.png" /></p>
<p>When satisfied, save and exit (<code>:x</code>) the editor.</p>
<div class="admonition note">
<p class="admonition-title">SSH CONNECTIONS AND ANSIBLE</p>
<p>A comment on generating SSH keys for <code>cecuser</code> (and Ansible clusters in general). Ansible is an <em>agentless</em> tool and it relies on SSH to connect to its targets. SSH is an open source secure connection used worldwide. <strong>Ansible supports both userID/password or password-free SSH connections.</strong> The environment you will be using to conduct this lab (provided by the ITZ) has taken care of SSH key generation ahead of time. No additional work is needed on your part in creating these keys.</p>
</div>
<p>Let’s verify the cluster’s connectivity to the Ansible client endpoints you just defined. Execute the following while connected to VM1 (which you should be already at this stage):
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>ansible aixclients -m ping
</code></pre></div></p>
<p>This will ping the clients defined in the <code>/HOSTS/</code> directory earlier.</p>
<p><img alt="" src="_attachments/part1_v2_figure9.png" /></p>
<p>You should receive a response from both of the <code>aixclients</code>, indicating that you can run commands against this AIX LPAR without needing to provide a password each time.</p>
<p>Next, we need to run the <code>setup</code> module to view the characteristics for each target (<code>aixclient</code>):
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>ansible aixclients -m setup
</code></pre></div></p>
<p>This module provides very extensive information in JSON format about each of your AIX clients. This information is essentially an <strong>Inventory</strong> of all your server’s hardware and software.</p>
<p><img alt="" src="_attachments/part1_v2_figure10.png" /></p>
<p>The information provided in the output can all be referenced inside an Ansible <strong>Playbook</strong> to customize your tasks. This is a more advanced feature of Ansible which we will cover later in the lab.</p>
<p>Next, identify the hostnames for each of the <code>aixclients</code> group members using the <code>command</code> module — which is used for executing OS level commands on Ansible client endpoints.
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>ansible aixclients -m command -a &#39;hostname&#39;
</code></pre></div></p>
<p>The hostname will be the first value returned in the string.</p>
<p><img alt="" src="_attachments/part1_v2_figure11.png" /></p>
<p>Finally, before moving on to the lab proper, let's do a quick test against the host and clients using a simple script.</p>
<p>Navigate back to the <code>/ANSIBLE-SCRIPTS</code> directory to begin:
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>cd $HOME/ansible-scripts
</code></pre></div></p>
<p>Create a local script called <code>testscript.sh</code> using the following:
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>sudo vi testscript.sh
</code></pre></div></p>
<p>Add the following instructions to your Shell script definition:
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>echo &quot;Executing my testscript with parameter $1&quot; hostname
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>date
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>uptime
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>oslevel -s
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>exit
</code></pre></div></p>
<p>When satisfied, save and exit (<code>:x</code>) the Shell script file.</p>
<p>Change the permissions on the script file to make it executable:
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>sudo chmod +x testscript.sh
</code></pre></div></p>
<p>Lastly, execute the script across both clients:
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>ansible aixclients -m script -a &#39;testscript.sh awesome&#39;
</code></pre></div></p>
<p>The output return to console should closely resemble the following screenshot.</p>
<p><img alt="" src="_attachments/part1_v2_figure13.png" /></p>
<p>Everything's now set and in good shape for you to get to work on deploying your first virtual machine via Ansible on to the PowerVC infrastructure.</p>




              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../.." class="md-footer__link md-footer__link--prev" aria-label="Previous: Introduction" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Introduction
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 IBM
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
    
  </body>
</html>